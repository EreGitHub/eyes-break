<article class="eb-home">
  <div
    class="eb-home-stat eb-home-work"
    [ngClass]="{ 'eb-home-change-border': stateSession() === STATE_SESSION.WORK }"
  >
    <div class="eb-home-stat-icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox="0 -960 960 960"
        width="24px"
        fill="#e8eaed"
      >
        <path
          d="M420-800h120-120Zm0 640h120-120Zm-60 80-54-182q-48-38-77-95t-29-123q0-66 29-123t77-95l54-182h240l54 182q48 38 77 95t29 123q0 66-29 123t-77 95L600-80H360Zm120-200q83 0 141.5-58.5T680-480q0-83-58.5-141.5T480-680q-83 0-141.5 58.5T280-480q0 83 58.5 141.5T480-280Zm-76-470q20-5 38.5-8t37.5-3q19 0 37.5 3t38.5 8l-16-50H420l-16 50Zm16 590h120l16-50q-20 5-38.5 7.5T480-200q-19 0-37.5-2.5T404-210l16 50Z"
        />
      </svg>
    </div>

    <div class="eb-home-stat-content">
      <label class="eb-home-stat-time">{{ timerWork() }}</label>
      <label class="eb-home-stat-label">Tiempo de trabajo</label>
    </div>
  </div>

  <div
    class="eb-home-stat eb-home-break"
    [ngClass]="{ 'eb-home-change-border': stateSession() === STATE_SESSION.BREAK }"
  >
    <div class="eb-home-stat-icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox="0 -960 960 960"
        width="24px"
        fill="#e8eaed"
      >
        <path
          d="M360-320h80v-320h-80v320Zm160 0h80v-320h-80v320ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
        />
      </svg>
    </div>

    <div class="eb-home-stat-content">
      <label class="eb-home-stat-time">{{ timerBreak() }}</label>
      <label class="eb-home-stat-label">Tiempo de descanso</label>
    </div>
  </div>

  <div class="eb-home-status">
    <div class="eb-home-status-indicator"></div>
    <label class="eb-home-status-text">
      {{ currentMessage() }}
    </label>
  </div>

  <div class="eb-home-start-section">
    <button
      class="eb-home-start-button"
      [ngClass]="{ 'eb-home-start-button-animated': animatedAfterStarted() }"
      (click)="toogleSession()"
    >
      <svg width="0" height="0">
        <defs>
          <linearGradient id="progress-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#3b82f6" />
            <stop offset="50%" stop-color="#8b5cf6" />
            <stop offset="100%" stop-color="#ec4899" />
          </linearGradient>
        </defs>
      </svg>
      <div class="eb-home-start-inner">
        <div
          class="eb-home-start-icon"
          [ngClass]="{ 'eb-home-start-icon-animated': animatedAfterStarted() }"
        >
          @if (stateSession() === STATE_SESSION.WAITING) {
            <h2 class="eb-home-start-title--not-running">
              {{ title() }}
              <span class="eb-home-dots">
                <span>.</span>
                <span>.</span>
                <span>.</span>
              </span>
            </h2>
          } @else {
            <section class="eb-home-running-section">
              <h2 class="eb-home-start-title--running">{{ title() }}</h2>

              <span class="eb-home-progress-text">{{ progress() }}%</span>
            </section>
          }
        </div>
        <svg class="eb-home-progress" viewBox="0 0 100 100">
          <circle class="eb-home-progress-bg" cx="50" cy="50" r="45" />
          <circle
            class="eb-home-progress-fill"
            cx="50"
            cy="50"
            r="45"
            [style.stroke-dashoffset]="283 - (283 * progress()) / 100"
          />
        </svg>
      </div>
      <div
        class="eb-home-start-glow"
        [ngClass]="{ 'eb-home-start-glow-animated': animatedAfterStarted() }"
      ></div>
    </button>
  </div>

  <div class="eb-home-footer">
    <div class="eb-home-dot-small"></div>
    <span>Mant√©n el enfoque y la productividad</span>
    <div class="eb-home-dot-small"></div>
  </div>

  <button class="eb-home-settings-button" (click)="showModal()">
    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 -960 960 960">
      <path
        d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"
      />
    </svg>
  </button>

  @if (isShowModal()) {
    <div class="eb-home-modal-overlay" @fadeScale>
      <div class="eb-home-modal-content">
        <div class="eb-home-modal">
          <eb-setting lfClickOutside (clickOutside)="closeModal()"></eb-setting>
        </div>
      </div>
    </div>
  }
</article>
